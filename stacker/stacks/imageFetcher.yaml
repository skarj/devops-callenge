sys_path: .
namespace: imagefetcher
stacker_bucket: imagefetcher-stacker

stacks:
  - name: eks-vpc
    class_path: blueprints.eks.vpc.EKSVPC
    variables:
      BaseCidr: "10.24"

  - name: eks-cluster
    class_path: blueprints.eks.cluster.EKSCluster
    variables:
      VpcId: ${output eks-vpc::VPCID}
      PublicSubnets: ${output eks-vpc::PublicSubnets}
      PrivateSubnets: ${output eks-vpc::PrivateSubnets}
      Version: "1.10"

  - name: eks-nodes
    class_path: blueprints.eks.nodes.EKSNodes
    variables:
      VpcId: ${output eks-vpc::VPCID}
      ClusterControlPlaneSecurityGroup: ${output eks-cluster::ClusterControlPlaneSecurityGroup}
      Subnets: ${output eks-vpc::PrivateSubnets}
      ClusterName: ${output eks-cluster::ClusterName}
      KeyName: "imagefetcher-eks"
      NodeAutoScalingGroupMaxSize: 3

  # - name: imagefetcher
  #   class_path: blueprints.imagefetcher.Imagefetcher
  #   variables:
  #     GithubRepo: ${imagefetcherGithubRepo}
